<!--
{
  "draft": false,
  "tags": ["Программирование"]
}
-->

# Удобная команда для запуска Docker

```blogEnginePageDate
06 августа 2025
```

Все знают команды `docker run` и `docker build`, однако в процессе разработки мне пришлось часто использовать
дополнительные ключи,которые позволили мне быстрее работать и проверять докер образы. Из проекта в проект нужно было
проверять потребление памяти, менять порты для запуска нескольких докеров, прокидывать енв переменные и другое.
Соответственно хочу поделиться командами.

## docker build

```
docker build . -t your-image
```

Тут довольно просто. Запускаем билд и задаем имя образа, чтобы использовать его потом и чтобы при ребилде не засорять
пространство имен, а использовать то же имя. Опционально можно указать `your-image:VERSION`.

## docker run

```
docker run --rm --name your-container -p 8200:3100 -p 8201:3101 -e PORT=3100 -e HOSTNAME=0.0.0.0 -m 2048m your-image
```

* `--rm` - останавливаем, удаляем старый контейнер и запускаем новый с тем же именем, без этого придется сначала
  остановить докер образ, который занимает данное имя или порт и потом запустить новый.
* `--name` - задаем имя контейнеру, чтобы не засорять пространство имен и использовать потом
* `-p OUT:INSIDE` - пробрасываем порт, где `INSIDE` порт внутри образа, а `OUT` порт, который будет доступен для
  запросов
* `-e KEY=VALUE` - проставление енвайромент переменной
* `-m` - ограничение образа по памяти, удобно для определения сколько минимально памяти требуется приложению
* optionally ` --detach` - если хотите что запустить образ в отдельном потоке, чтобы освободить терминал
* `your-image` - имя образа из предыдущего шага

## docker exec

```
docker exec -it your-container sh -c "cd ./etc && ls"
```

Запуск команды или несколько команд в кавычках из под sh. Иногда бывает sh не доступен и нужно вызвать bash.

